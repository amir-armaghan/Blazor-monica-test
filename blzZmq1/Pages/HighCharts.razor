@page "/highcharts"
@using blzZmq1.Components
@inject Services.JsonToChart ChartData
@using Newtonsoft.Json


<Highchart Json="@chartjson">

</Highchart>
<div> @series1</div>
@code{

    //public object chartData = blzZmq1.Services.JsonToChart.ConvertJson();
    //public static object
    //
    //           var firstItems = (chartData.Data[0].OutputIds[9].Result as List<object[]>).ToList<float[]>().Select(x => x[0]).ToList();

    public static string xAxsis = blzZmq1.Services.GetInfoFromJson.GetDate();
    public static string series1 = blzZmq1.Services.GetInfoFromJson.GetPrecip();
    public static string series2 = blzZmq1.Services.GetInfoFromJson.GetTavg();
    public static string series3 = blzZmq1.Services.GetInfoFromJson.GetGlobalrad();


    // Highchart HELP
    // xAxis
    // xAxis: {
    //   type: 'datetime'

    // yAxis: {
    //    maxZoom: 0.1



    public static string chartTypeName = "area";  // has to get from json
    public static string chartTitleName = "Monica Model from json message";
    public static string chartOrigSpec = "Daily";
    string chartjson = @" {
                    chart: {
                        zoomType: 'x',
                        height: 600,
                        type: '" + chartTypeName + @"',

                    },
                        colors: [
                        '#063c75',
                        '#1c8c44',
                        '#881452',
                        '#280137',
                        '#63a194',
                        '#2c3539',
                        '#428bca',
                        '#d9534f',
                        '#96ceb4',
                        '#80699B',
                        '#3D96AE',
                        '#DB843D',
                        '#92A8CD',
                        '#A47D7C',
                        '#B5CA92'],
                    title: {
                        text: '" + chartTitleName + @"'
                    },

                    subtitle: {
                        text: '" + chartOrigSpec + @"'
                    },

                    yAxis: {
                        title: {
                            text: 'Crop'
                        },
                        maxZoom: 2
                    },

                    xAxis: {
                        title: {
                            text: 'Date'
                        },
                         categories: [" + xAxsis + @"],
                    },

                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'middle'
                    },

                    plotOptions: {
                        area: {
                            fillColor: {
                                linearGradient: {
                                    x1: 0,
                                    y1: 0,
                                    x2: 0,
                                    y2: 0.6
                                },
                                stops: [
                                    [0, Highcharts.getOptions().colors[0]],
                                    [1, Highcharts.color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
                                ]
                            },
                            marker: {
                                radius: 2
                            },
                            lineWidth: 1,
                            states: {
                                hover: {
                                    lineWidth: 1
                                }
                            },
                            threshold: null
                        }
                    },

                    series: [{
                        name: 'Precip',
                        data: [" + series1 + @"]
                    }, {
                        name: 'Tavg',
                        data: [" + series2 + @"]
                    }, {
                        name: 'Globalrad',
                        data: [" + series3 + @"]
                    }, 

                    ],

                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 500
                            },
                            chartOptions: {
                                legend: {
                                    layout: 'horizontal',
                                    align: 'center',
                                    verticalAlign: 'bottom'
                                }
                            }
                        }]
                    },




                    }";


}